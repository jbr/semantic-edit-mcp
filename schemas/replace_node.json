{
    "type": "object",
    "properties": {
        "file_path": {
            "type": "string",
            "description": "Path to the source file. Supports Rust (.rs), JSON (.json), Markdown (.md), and other languages."
        },
        "selector": {
            "type": "object",
            "description": "Text-anchored node selector using exact text and AST navigation. üí° Discovery tip: Omit ancestor_node_type to explore what's available around your anchor text!",
            "properties": {
                "anchor_text": {
                    "type": "string",
                    "description": "Exact text to find in the source code as an anchor point. üí° Keep it short but unique! Examples: 'fn main', 'struct User', '\"key\":', '# Heading'. Avoid large text blocks."
                },
                "ancestor_node_type": {
                    "type": "string",
                    "description": "AST node type to walk up to from the anchor point. Optional - omit to explore available options! Common types: 'function_item' (entire function), 'impl_item' (impl block), 'struct_item' (struct definition), 'pair' (JSON key-value), 'list_item' (markdown list item). üîç Discovery: Use 'bogus' to see available options!",
                    "examples": ["function_item", "struct_item", "impl_item", "pair", "list_item", "expression_statement", "block"]
                }
            },
            "required": ["anchor_text"],
            "additionalProperties": false
        },
        "new_content": {
            "type": "string",
            "description": "New content to replace the node"
        },
        "preview_only": {
            "type": "boolean",
            "description": "If true, show preview of changes without writing to file. üí° Always preview first to verify you're targeting the right node!",
            "default": false
        },
        "language": {
            "type": "string",
            "description": "Optional language hint. If not provided, language will be detected from file extension.",
            "enum": ["rust", "json", "toml", "markdown", "typescript", "javascript", "python"]
        }
    },
    "required": ["file_path", "selector", "new_content"],
    "additionalProperties": false,
    "examples": [
        {
            "description": "Replace a Rust function",
            "file_path": "src/main.rs",
            "selector": {
                "anchor_text": "fn hello",
                "ancestor_node_type": "function_item"
            },
            "new_content": "fn hello() { println!(\"Hello, world!\"); }",
            "preview_only": true
        },
        {
            "description": "Replace JSON value", 
            "file_path": "config.json",
            "selector": {
                "anchor_text": "\"port\":",
                "ancestor_node_type": "pair"
            },
            "new_content": "\"port\": 8080"
        },
        {
            "description": "Discovery technique - see what ancestors are available",
            "file_path": "src/lib.rs",
            "selector": {
                "anchor_text": "pub struct",
                "ancestor_node_type": "bogus"
            },
            "new_content": "...",
            "preview_only": true,
            "_note": "This will fail but show available ancestor_node_type options!"
        }
    ]
}
