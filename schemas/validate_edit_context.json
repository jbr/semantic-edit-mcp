{
    "type": "object",
    "properties": {
        "file_path": {
            "type": "string",
            "description": "Path to the source file"
        },
        "selector": {
            "type": "object",
            "description": "Text-anchored node selector using exact text and AST navigation",
            "properties": {
                "anchor_text": {
                    "type": "string",
                    "description": "Exact text to find in the source code as an anchor point"
                },
                "ancestor_node_type": {
                    "type": "string",
                    "description": "AST node type to walk up to from the anchor point"
                }
            },
            "required": ["anchor_text", "ancestor_node_type"],
            "additionalProperties": false
        },
        "content": {
            "type": "string",
            "description": "Content to validate for insertion"
        },
        "operation_type": {
            "type": "string",
            "description": "Type of edit operation",
            "enum": ["insert_before", "insert_after", "replace", "wrap"]
        },
        "language": {
            "type": "string",
            "description": "Optional language hint. If not provided, language will be detected from file extension.",
            "enum": ["rust", "json", "toml", "markdown", "typescript", "javascript", "python"]
        }
    },
    "required": ["file_path", "selector", "content", "operation_type"],
    "additionalProperties": false
}
